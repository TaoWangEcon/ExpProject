{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/Myworld/Dropbox/ExpProject/workingfolder/ind_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}20 Jun 2019, 19:27:39
{txt}
{com}. 
. 
. ***************************
. **  Clean and Merge Data **
. ***************************
. 
. use "${c -(}folder{c )-}/SPF/individual/InfExpSPFPointIndQ",clear 
{txt}
{com}. 
. duplicates report year quarter ID 

{p 0 4}{txt}Duplicates in terms of {res} year quarter ID{p_end}

{txt}{hline 10}{c TT}{hline 27}
   copies {c |} observations       surplus
{hline 10}{c +}{hline 27}
        1 {c |}         {res}8195             0
{txt}{hline 10}{c BT}{hline 27}

{com}. 
. merge 1:1 year quarter ID using "${c -(}folder{c )-}/SPF/individual/InfExpSPFDstIndQ.dta"
{res}{txt}{p 0 7 2}
(note: variable
year was 
int, now double to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
quarter was 
byte, now double to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
ID was 
int, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           6,102
{txt}{col 9}from master{col 30}{res}           6,102{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}matched{col 30}{res}           2,093{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. rename _merge SPFDst_merge
{res}{txt}
{com}. table year if SPFDst_merge ==3

{txt}{hline 10}{c TT}{hline 11}
     YEAR {c |}      Freq.
{hline 10}{c +}{hline 11}
     2007 {c |}        {res}199
     {txt}2008 {c |}        {res}198
     {txt}2009 {c |}        {res}169
     {txt}2010 {c |}        {res}165
     {txt}2011 {c |}        {res}169
     {txt}2012 {c |}        {res}171
     {txt}2013 {c |}        {res}171
     {txt}2014 {c |}        {res}172
     {txt}2015 {c |}        {res}170
     {txt}2016 {c |}        {res}164
     {txt}2017 {c |}        {res}159
     {txt}2018 {c |}        {res}147
     {txt}2019 {c |}         {res}38
{txt}{hline 10}{c BT}{hline 11}

{com}. 
. merge m:1 year quarter using "${c -(}mainfolder{c )-}/OtherData/InfShocksClean.dta",keep(match using master)
{res}{txt}{p 0 7 2}
(note: variable
month was 
float, now double to accommodate using data's values)
{p_end}
(label _merge already defined)

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,112
{txt}{col 9}from master{col 30}{res}           3,112{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}matched{col 30}{res}           5,083{txt}  (_merge==3)
{col 5}{hline 41}

{com}. rename _merge infshocks_merge
{res}{txt}
{com}. 
. 
. *******************************
. **  Set Panel Data Structure **
. *******************************
. 
. xtset ID dateQ
{res}{txt}{col 8}panel variable:  {res}ID (unbalanced)
{txt}{col 9}time variable:  {res}{col 25}dateQ, 1968q4 to 2019q1, but with gaps
{txt}{col 17}delta:  {res}1 quarter
{txt}
{com}. sort ID year quarter 
{txt}
{com}. 
. drop if ID==ID[_n-1] & INDUSTRY != INDUSTRY[_n-1]
{txt}(23 observations deleted)

{com}. 
. 
. *******************************
. **  Summary Statistics of SPF **
. *******************************
. 
. tabstat ID,s(count) by(dateQ) column(statistics)

{txt}Summary for variables: ID
{col 6}by categories of: dateQ 

{ralign 9:dateQ} {...}
{c |}         N
{hline 10}{c +}{hline 10}
{ralign 9:1968q4} {...}
{c |}{...}
 {res}       87
{txt}{ralign 9:1969q1} {...}
{c |}{...}
 {res}       65
{txt}{ralign 9:1969q2} {...}
{c |}{...}
 {res}       59
{txt}{ralign 9:1969q3} {...}
{c |}{...}
 {res}      128
{txt}{ralign 9:1969q4} {...}
{c |}{...}
 {res}       57
{txt}{ralign 9:1970q1} {...}
{c |}{...}
 {res}       60
{txt}{ralign 9:1970q2} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:1970q3} {...}
{c |}{...}
 {res}       57
{txt}{ralign 9:1970q4} {...}
{c |}{...}
 {res}      131
{txt}{ralign 9:1971q1} {...}
{c |}{...}
 {res}       56
{txt}{ralign 9:1971q2} {...}
{c |}{...}
 {res}       59
{txt}{ralign 9:1971q3} {...}
{c |}{...}
 {res}      106
{txt}{ralign 9:1971q4} {...}
{c |}{...}
 {res}       76
{txt}{ralign 9:1972q1} {...}
{c |}{...}
 {res}       66
{txt}{ralign 9:1972q2} {...}
{c |}{...}
 {res}       71
{txt}{ralign 9:1972q3} {...}
{c |}{...}
 {res}       69
{txt}{ralign 9:1972q4} {...}
{c |}{...}
 {res}       63
{txt}{ralign 9:1973q1} {...}
{c |}{...}
 {res}       68
{txt}{ralign 9:1973q2} {...}
{c |}{...}
 {res}       64
{txt}{ralign 9:1973q3} {...}
{c |}{...}
 {res}       46
{txt}{ralign 9:1973q4} {...}
{c |}{...}
 {res}       59
{txt}{ralign 9:1974q1} {...}
{c |}{...}
 {res}       63
{txt}{ralign 9:1974q2} {...}
{c |}{...}
 {res}       49
{txt}{ralign 9:1974q3} {...}
{c |}{...}
 {res}       54
{txt}{ralign 9:1974q4} {...}
{c |}{...}
 {res}       54
{txt}{ralign 9:1975q1} {...}
{c |}{...}
 {res}       46
{txt}{ralign 9:1975q2} {...}
{c |}{...}
 {res}       47
{txt}{ralign 9:1975q3} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:1975q4} {...}
{c |}{...}
 {res}       48
{txt}{ralign 9:1976q1} {...}
{c |}{...}
 {res}       48
{txt}{ralign 9:1976q2} {...}
{c |}{...}
 {res}       49
{txt}{ralign 9:1976q3} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1976q4} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1977q1} {...}
{c |}{...}
 {res}       41
{txt}{ralign 9:1977q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1977q3} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1977q4} {...}
{c |}{...}
 {res}       45
{txt}{ralign 9:1978q1} {...}
{c |}{...}
 {res}       26
{txt}{ralign 9:1978q2} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1978q3} {...}
{c |}{...}
 {res}       27
{txt}{ralign 9:1978q4} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1979q1} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:1979q2} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1979q3} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:1979q4} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:1980q1} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:1980q2} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1980q3} {...}
{c |}{...}
 {res}       24
{txt}{ralign 9:1980q4} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:1981q1} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1981q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1981q3} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1981q4} {...}
{c |}{...}
 {res}       46
{txt}{ralign 9:1982q1} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1982q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1982q3} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:1982q4} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:1983q1} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:1983q2} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:1983q3} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:1983q4} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1984q1} {...}
{c |}{...}
 {res}       31
{txt}{ralign 9:1984q2} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1984q3} {...}
{c |}{...}
 {res}       27
{txt}{ralign 9:1984q4} {...}
{c |}{...}
 {res}       31
{txt}{ralign 9:1985q1} {...}
{c |}{...}
 {res}       24
{txt}{ralign 9:1985q2} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:1985q3} {...}
{c |}{...}
 {res}       31
{txt}{ralign 9:1985q4} {...}
{c |}{...}
 {res}       25
{txt}{ralign 9:1986q1} {...}
{c |}{...}
 {res}       26
{txt}{ralign 9:1986q2} {...}
{c |}{...}
 {res}       28
{txt}{ralign 9:1986q3} {...}
{c |}{...}
 {res}       24
{txt}{ralign 9:1986q4} {...}
{c |}{...}
 {res}       24
{txt}{ralign 9:1987q1} {...}
{c |}{...}
 {res}       22
{txt}{ralign 9:1987q2} {...}
{c |}{...}
 {res}       28
{txt}{ralign 9:1987q3} {...}
{c |}{...}
 {res}       22
{txt}{ralign 9:1987q4} {...}
{c |}{...}
 {res}       20
{txt}{ralign 9:1988q1} {...}
{c |}{...}
 {res}       18
{txt}{ralign 9:1988q2} {...}
{c |}{...}
 {res}       19
{txt}{ralign 9:1988q3} {...}
{c |}{...}
 {res}       18
{txt}{ralign 9:1988q4} {...}
{c |}{...}
 {res}       15
{txt}{ralign 9:1989q1} {...}
{c |}{...}
 {res}       17
{txt}{ralign 9:1989q2} {...}
{c |}{...}
 {res}       17
{txt}{ralign 9:1989q3} {...}
{c |}{...}
 {res}       15
{txt}{ralign 9:1989q4} {...}
{c |}{...}
 {res}       17
{txt}{ralign 9:1990q1} {...}
{c |}{...}
 {res}       14
{txt}{ralign 9:1990q3} {...}
{c |}{...}
 {res}       11
{txt}{ralign 9:1990q4} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1991q1} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1991q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1991q3} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:1991q4} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:1992q1} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:1992q2} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1992q3} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1992q4} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:1993q1} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:1993q2} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1993q3} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1993q4} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:1994q1} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1994q2} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:1994q3} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1994q4} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:1995q1} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:1995q2} {...}
{c |}{...}
 {res}       52
{txt}{ralign 9:1995q3} {...}
{c |}{...}
 {res}       52
{txt}{ralign 9:1995q4} {...}
{c |}{...}
 {res}       47
{txt}{ralign 9:1996q1} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1996q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1996q3} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:1996q4} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1997q1} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:1997q2} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:1997q3} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1997q4} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:1998q1} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:1998q2} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:1998q3} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:1998q4} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:1999q1} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:1999q2} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:1999q3} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:1999q4} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:2000q1} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2000q2} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2000q3} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:2000q4} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2001q1} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:2001q2} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:2001q3} {...}
{c |}{...}
 {res}       33
{txt}{ralign 9:2001q4} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:2002q1} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:2002q2} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:2002q3} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2002q4} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:2003q1} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:2003q2} {...}
{c |}{...}
 {res}       35
{txt}{ralign 9:2003q3} {...}
{c |}{...}
 {res}       30
{txt}{ralign 9:2003q4} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2004q1} {...}
{c |}{...}
 {res}       31
{txt}{ralign 9:2004q2} {...}
{c |}{...}
 {res}       32
{txt}{ralign 9:2004q3} {...}
{c |}{...}
 {res}       29
{txt}{ralign 9:2004q4} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2005q1} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2005q2} {...}
{c |}{...}
 {res}       46
{txt}{ralign 9:2005q3} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2005q4} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2006q1} {...}
{c |}{...}
 {res}       53
{txt}{ralign 9:2006q2} {...}
{c |}{...}
 {res}       53
{txt}{ralign 9:2006q3} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2006q4} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2007q1} {...}
{c |}{...}
 {res}       49
{txt}{ralign 9:2007q2} {...}
{c |}{...}
 {res}       52
{txt}{ralign 9:2007q3} {...}
{c |}{...}
 {res}       49
{txt}{ralign 9:2007q4} {...}
{c |}{...}
 {res}       48
{txt}{ralign 9:2008q1} {...}
{c |}{...}
 {res}       50
{txt}{ralign 9:2008q2} {...}
{c |}{...}
 {res}       50
{txt}{ralign 9:2008q3} {...}
{c |}{...}
 {res}       47
{txt}{ralign 9:2008q4} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2009q1} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:2009q2} {...}
{c |}{...}
 {res}       51
{txt}{ralign 9:2009q3} {...}
{c |}{...}
 {res}       34
{txt}{ralign 9:2009q4} {...}
{c |}{...}
 {res}       41
{txt}{ralign 9:2010q1} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2010q2} {...}
{c |}{...}
 {res}       44
{txt}{ralign 9:2010q3} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2010q4} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:2011q1} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:2011q2} {...}
{c |}{...}
 {res}       44
{txt}{ralign 9:2011q3} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:2011q4} {...}
{c |}{...}
 {res}       45
{txt}{ralign 9:2012q1} {...}
{c |}{...}
 {res}       45
{txt}{ralign 9:2012q2} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:2012q3} {...}
{c |}{...}
 {res}       48
{txt}{ralign 9:2012q4} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:2013q1} {...}
{c |}{...}
 {res}       46
{txt}{ralign 9:2013q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2013q3} {...}
{c |}{...}
 {res}       41
{txt}{ralign 9:2013q4} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2014q1} {...}
{c |}{...}
 {res}       45
{txt}{ralign 9:2014q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2014q3} {...}
{c |}{...}
 {res}       43
{txt}{ralign 9:2014q4} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2015q1} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:2015q2} {...}
{c |}{...}
 {res}       44
{txt}{ralign 9:2015q3} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2015q4} {...}
{c |}{...}
 {res}       45
{txt}{ralign 9:2016q1} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:2016q2} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2016q3} {...}
{c |}{...}
 {res}       40
{txt}{ralign 9:2016q4} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2017q1} {...}
{c |}{...}
 {res}       42
{txt}{ralign 9:2017q2} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2017q3} {...}
{c |}{...}
 {res}       39
{txt}{ralign 9:2017q4} {...}
{c |}{...}
 {res}       41
{txt}{ralign 9:2018q1} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2018q2} {...}
{c |}{...}
 {res}       36
{txt}{ralign 9:2018q3} {...}
{c |}{...}
 {res}       38
{txt}{ralign 9:2018q4} {...}
{c |}{...}
 {res}       37
{txt}{ralign 9:2019q1} {...}
{c |}{...}
 {res}       37
{txt}{hline 10}{c +}{hline 10}
{ralign 9:Total} {...}
{c |}{...}
 {res}     8171
{txt}{hline 10}{c BT}{hline 10}

{com}. 
. 
. ******************************
. *** Computing some measures **
. ******************************
. 
. gen SPFCPI_FE = CPI1y - Inf1yf_CPIAU
{txt}(3575 missing values generated)

{com}. label var SPFCPI_FE "1-yr-ahead forecast error(SPF CPI)"
{txt}
{com}. gen SPFCCPI_FE = CORECPI1y - Inf1yf_CPICore
{txt}(6464 missing values generated)

{com}. label var SPFCPI_FE "1-yr-ahead forecast error(SPF core CPI)"
{txt}
{com}. gen SPFPCE_FE = PCE1y - Inf1yf_PCE
{txt}(6590 missing values generated)

{com}. label var SPFPCE_FE "1-yr-ahead forecast error(SPF PCE)"
{txt}
{com}. 
. 
. *****************************************
. ****  Renaming so that more consistent **
. *****************************************
. 
. 
. rename CPI1y SPFCPI_Mean
{res}{txt}
{com}. rename PCE1y SPFPCE_Mean
{res}{txt}
{com}. rename COREPCE1y SPFCPCE_Mean
{res}{txt}
{com}. rename CORECPI1y SPFCCPI_Mean
{res}{txt}
{com}. 
. rename PRCPCEVar1 SPFPCE_Var
{res}{txt}
{com}. rename PRCCPIVar1 SPFCPI_Var
{res}{txt}
{com}. 
. rename SPFCPI_FE SPFCPI_FE
{res}{txt}  (all {it:newnames}=={it:oldnames})

{com}. rename SPFPCE_FE SPFPCE_FE
{res}{txt}  (all {it:newnames}=={it:oldnames})

{com}. 
. 
. 
. ******************************
. **   More Series Charts   ****
. ******************************
. 
. foreach mom in Mean Var{c -(}
{txt}  2{com}.    foreach var in SPFCPI SPFPCE{c -(}
{txt}  3{com}.      egen `var'_`mom'p75 =pctile(`var'_`mom'),p(75) by(dateQ)
{txt}  4{com}.          egen `var'_`mom'p25 =pctile(`var'_`mom'),p(25) by(dateQ)
{txt}  5{com}.          local lb: variable label `var'_`mom'
{txt}  6{com}.          label var `var'_`mom'p75 "`lb': 75 pctile"
{txt}  7{com}.          label var `var'_`mom'p25 "`lb': 25 pctile"
{txt}  8{com}.  {c )-}
{txt}  9{com}. {c )-}
{txt}(2687 missing values generated)
(2687 missing values generated)
(6083 missing values generated)
(6083 missing values generated)
(6083 missing values generated)
(6083 missing values generated)
(6083 missing values generated)
(6083 missing values generated)

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. tsline SPFCPI_Varp76
{err}variable SPFCPI_Varp76 not found
{txt}{search r(111):r(111);}

{com}. count if SPFCPI_Varp75!=.
{res} 2089

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(statistics) save

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p5} {...}
{c |}{...}
 {res} .3863068  .2936747  .3863068  .3917868  .0026963  .0030491  .0020017  .0030008
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p95} {...}
{c |}{...}
 {res} 2.179215  2.200922         2  2.052758  .0961309  .4814685  .0961309  .4814685
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p5}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p90}{space 1}{space 1}{ralign 9:p95}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.179215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .2936747}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.200922}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .3917868}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.052758}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0026963}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030491}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020017}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030008}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("data_winsored")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(statistics) save

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p5} {...}
{c |}{...}
 {res} .3863068  .2936747  .3863068  .3917868  .0026963  .0030491  .0020017  .0030008
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p95} {...}
{c |}{...}
 {res} 2.179215  2.200922         2  2.052758  .0961309  .4814685  .0961309  .4814685
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p5}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p90}{space 1}{space 1}{ralign 9:p95}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.179215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .2936747}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.200922}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .3917868}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.052758}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0026963}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030491}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020017}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030008}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A2 = matrix(T), sheet("data_winsored")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(statistics) save

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") replace 
{err}option {bf:replace} not allowed
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(statistics) save

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. /*
> foreach var in `Moments'{c -(}
> 
>       egen `var'p1=pctile(`var'),p(1)
>           egen `var'p99=pctile(`var'),p(99)
>           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
> {c )-}
> 
> tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save
> 
> return list
> mat T = r(StatTotal)'
> matlist T
> putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
> putexcel A2 = matrix(T), sheet("data_winsored")
> */
. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. expost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat) save
{err}unrecognized command:  expost
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat) save
{err}option {bf:save} not allowed
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv not found)
(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv not found)
(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xls",replace 
{res}{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xls not found)
(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xls"'})

{com}. 
. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. eststo clear
{txt}
{com}. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xls",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xls"'})

{com}. 
. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. eststo clear
{txt}
{com}. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) columns(stat)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(min)}{space 1}{space 1}{ralign 9:e(p1)}{space 1}{space 1}{ralign 9:e(p10)}{space 1}{space 1}{ralign 9:e(p25)}{space 1}{space 1}{ralign 9:e(p50)}{space 1}{space 1}{ralign 9:e(p75)}{space 1}{space 1}{ralign 9:e(p90)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p99)}{space 1}{space 1}{ralign 9:e(max)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv not found)
(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. eststo clear
{txt}
{com}. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. esttab . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.rtf",replace 
{res}{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.rtf not found)
(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.rtf"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. estout . using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.rtf",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.rtf"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. estpost tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}Summary statistics: count min p1 p10 p25 p50 p75 p90 p99 max
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. estout  using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.rtf",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.rtf"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. estpost tabstat `Moments', st(N )

{txt}Summary statistics: count
     for variables: PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}{space 1}{ralign 9:e(PRCC~0)}{space 1}{space 1}{ralign 9:e(PRCC~1)}{space 1}{space 1}{ralign 9:e(PRCP~0)}{space 1}{space 1}{ralign 9:e(PRCP~1)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:count}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}

{com}. estout  using "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.csv",replace 
{res}{txt}(output written to {browse  `"/Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.csv"'})

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max)

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:c1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:r1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        .}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. dddd
{err}unrecognized command:  dddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. dddd
{err}unrecognized command:  dddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. help tabstat

. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") names nformat(number_d2)
{err}option {bf:names} not allowed
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", replace
{res}{txt}
{com}. putexcel A1 = matrix(T), sheet("rawdata") names nformat(number_d2)
{err}option {bf:names} not allowed
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. mat names = `Moments' 
{err}PRCCPIMean0 not found
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/var/folders/k3/fzq0vzzx2b56ypvhsddgs7hr0000gn/T//SD16963.000000"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. *mat names = `Moments' 
. matlist `Moments' 
{err}PRCCPIMean0 not found
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. 
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p5} {...}
{c |}{...}
 {res} .3863068  .2936747  .3863068  .3917868  .0026963  .0030491  .0020017  .0030008
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p95} {...}
{c |}{...}
 {res} 2.179215  2.200922         2  2.052758  .0961309  .4814685  .0961309  .4814685
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p5}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p90}{space 1}{space 1}{ralign 9:p95}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.179215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .2936747}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.200922}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .3917868}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.052758}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0026963}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030491}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020017}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030008}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("data_winsored")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. 
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p5} {...}
{c |}{...}
 {res} .3863068  .2936747  .3863068  .3917868  .0026963  .0030491  .0020017  .0030008
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p95} {...}
{c |}{...}
 {res} 2.179215  2.200922         2  2.052758  .0961309  .4814685  .0961309  .4814685
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p5}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p90}{space 1}{space 1}{ralign 9:p95}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.179215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .2936747}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.200922}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .3917868}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.052758}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0026963}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030491}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020017}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030008}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("data_winsored")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1        p5       p10       p50       p90       p95
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .3802912  .4318608  .5203517         2  2.259464
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .2462199  .4180752  .5241744         2  2.259464
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .3689205  .4155341  .5199678  1.908029  2.047746
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .3796237  .4188922  .5206167  1.993781  2.111737
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0020336  .0073694  .0291921  .0771097  .1103936
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0025067  .0066313  .0333747  .0961309    .59703
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0018051  .0058931  .0291921  .0771097  .0961309
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0023167  .0104073  .0333747  .0961309  .6194505
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p5}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .3802912}}}{space 1}{space 1}{ralign 9:{res:{sf: .2462199}}}{space 1}{space 1}{ralign 9:{res:{sf: .3689205}}}{space 1}{space 1}{ralign 9:{res:{sf: .3796237}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020336}}}{space 1}{space 1}{ralign 9:{res:{sf: .0025067}}}{space 1}{space 1}{ralign 9:{res:{sf: .0018051}}}{space 1}{space 1}{ralign 9:{res:{sf: .0023167}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p95}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.047746}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.111737}}}{space 1}{space 1}{ralign 9:{res:{sf: .1103936}}}{space 1}{space 1}{ralign 9:{res:{sf:   .59703}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .6194505}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. 
. tabstat `Moments', st(N min p1 p5 p10 p50 p90 p95 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p5} {...}
{c |}{...}
 {res} .3863068  .2936747  .3863068  .3917868  .0026963  .0030491  .0020017  .0030008
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p95} {...}
{c |}{...}
 {res} 2.179215  2.200922         2  2.052758  .0961309  .4814685  .0961309  .4814685
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p5}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p90}{space 1}{space 1}{ralign 9:p95}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.179215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .2936747}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.200922}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .3863068}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .3917868}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.052758}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0026963}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030491}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0020017}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0030008}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B1 = matrix(T), sheet("data_winsored")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) col(stats) save 

{txt}{ralign 12:variable} {...}
{c |}         N       min        p1       p10       p25       p50       p75       p90
{hline 13}{c +}{hline 80}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}     1628 -26472.67 -.4027533  .4318608  .4885004  .5203517  .8643356         2
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res}     1606 -18576.11 -.3517563  .4180752  .4883978  .5241744  .6652987         2
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}     1518 -14787.64 -.3557954  .4155341  .4829901  .5199678  .8650593  1.908029
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res}     1453 -4144.223 -.3144251  .4188922  .4807022  .5206167  .6942495  1.993781
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res}     1628 -574.5461  .0007294  .0073694  .0174449  .0291921  .0446446  .0771097
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res}     1606 -423879.7  .0008905  .0066313  .0218019  .0333747  .0464889  .0961309
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res}     1518 -77.18375  .0008926  .0058931  .0189756  .0291921  .0424704  .0771097
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}     1453 -1351.355  .0009548  .0104073  .0221884  .0333747  .0458355  .0961309
{txt}{hline 13}{c BT}{hline 80}

{ralign 12:variable} {...}
{c |}       p99       max
{hline 13}{c +}{hline 20}
{ralign 12:PRCCPIMean0} {...}
{c |}{...}
 {res}  2.68019  8.763064
{txt}{ralign 12:PRCCPIMean1} {...}
{c |}{...}
 {res} 2.555522  18618.39
{txt}{ralign 12:PRCPCEMean0} {...}
{c |}{...}
 {res}      2.5  996.2262
{txt}{ralign 12:PRCPCEMean1} {...}
{c |}{...}
 {res} 2.452254  3.331012
{txt}{ralign 12:PRCCPIVar0} {...}
{c |}{...}
 {res} .8783811  967.4245
{txt}{ralign 12:PRCCPIVar1} {...}
{c |}{...}
 {res} 1.571215   3367980
{txt}{ralign 12:PRCPCEVar0} {...}
{c |}{...}
 {res} .8783811  1.14e+07
{txt}{ralign 12:PRCPCEVar1} {...}
{c |}{...}
 {res}   1.1326  111391.2
{txt}{hline 13}{c BT}{hline 20}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPI~n1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCE~n1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPI~r1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCE~r1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPIM~1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCEM~1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPIV~1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCEV~1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:PRCCPIM~0}{space 1}{space 1}{ralign 9:PRCCPI~n1}{space 1}{space 1}{ralign 9:PRCPCEM~0}{space 1}{space 1}{ralign 9:PRCPCE~n1}{space 1}{space 1}{ralign 9:PRCCPIV~0}{space 1}{space 1}{ralign 9:PRCCPI~r1}{space 1}{space 1}{ralign 9:PRCPCEV~0}{space 1}{space 1}{ralign 9:PRCPCE~r1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:N}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}
{space 0}{space 0}{ralign 12:min}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}
{space 0}{space 0}{ralign 12:p1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}
{space 0}{space 0}{ralign 12:p10}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}
{space 0}{space 0}{ralign 12:p25}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}
{space 0}{space 0}{ralign 12:p50}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}
{space 0}{space 0}{ralign 12:p75}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}
{space 0}{space 0}{ralign 12:p90}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}
{space 0}{space 0}{ralign 12:p99}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}
{space 0}{space 0}{ralign 12:max}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}.                           
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. *****************************
. **   Summary Stats of SPF  **
. *****************************
.                           
.           
. * table 1
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. * table 2
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. * table 3
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) by(year) save

{txt}Summary statistics: N, min, p1, p10, p25, p50, p75, p90, p99, max
  by categories of: year 

{ralign 8:year} {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:2007} {...}
{c |}{...}
 {res}      145       143       134       121       148       144       134       127
{txt}{space 8} {...}
{c |}{...}
 {res} .1719569  .1835053  .1719569  .1869803  .0012632  .0034241  .0024833  .0015544
{txt}{space 8} {...}
{c |}{...}
 {res} .2159828  .1869803  .2024634  .2078495  .0024054   .003877  .0024833  .0021125
{txt}{space 8} {...}
{c |}{...}
 {res} .4083881  .3999581  .3863068  .3999581  .0120063  .0130572  .0137511  .0133874
{txt}{space 8} {...}
{c |}{...}
 {res} .4660489  .4594145  .4478214  .4570734  .0182085  .0222979  .0206475  .0221509
{txt}{space 8} {...}
{c |}{...}
 {res} .4999986   .499999  .4999997  .4999993  .0291921  .0333747   .031097    .03174
{txt}{space 8} {...}
{c |}{...}
 {res} .5521101  .5521101  .5958193  .5785294  .0416667  .0416667  .0416667  .0469237
{txt}{space 8} {...}
{c |}{...}
 {res}        2         2         2         2  .0509236  .0661502   .062456  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758  2.552758   2.29576  2.318567  .2590822  .6478894  .2833697  .5852864
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.554057  2.408029  2.341227  .2833697  .8702627   .660483  .7498792
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2008} {...}
{c |}{...}
 {res}      145       137       127       124       147       142       133       125
{txt}{space 8} {...}
{c |}{...}
 {res} .1183248 -.3517563  .2078495  .2078495  .0020192  .0009902  .0021405  .0009902
{txt}{space 8} {...}
{c |}{...}
 {res} .1742715  .1162736  .2201423  .2438183    .00227  .0009967  .0035597  .0010482
{txt}{space 8} {...}
{c |}{...}
 {res} .4270399  .3828181  .3800312  .3999581  .0121568  .0111385  .0148539   .015366
{txt}{space 8} {...}
{c |}{...}
 {res} .4829901  .4748791  .4631231  .4712131  .0222253  .0210636  .0221884  .0222979
{txt}{space 8} {...}
{c |}{...}
 {res} .5000316  .5000009  .4999997  .4999997  .0316621  .0317011  .0291921  .0320954
{txt}{space 8} {...}
{c |}{...}
 {res} .6047483  .5639728  .5708577  .5788914  .0458334  .0458355  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5  2.106994  2.134381  1.952254  .0771097  .0771097  .0509236   .061071
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.251965  .7918601    1.1326  .6340855  .8243796
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.259464  .8514586   1.16971  .7153108  1.093869
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2009} {...}
{c |}{...}
 {res}      129       126       118       112       122       120       112       107
{txt}{space 8} {...}
{c |}{...}
 {res}-.3004756  -.319514 -.2873553  .2487712  .0008074  .0008964  .0008972   .000975
{txt}{space 8} {...}
{c |}{...}
 {res}-.2993531  .2022386  .3198102  .3198102  .0008557  .0009465  .0009932  .0009814
{txt}{space 8} {...}
{c |}{...}
 {res} .4425424  .4272468  .4601073  .4512652  .0017683  .0033229  .0026612  .0023079
{txt}{space 8} {...}
{c |}{...}
 {res} .4999797  .4752366  .4999954  .4883852  .0101958  .0200578  .0170586    .01692
{txt}{space 8} {...}
{c |}{...}
 {res} .6014206  .5334467  .6001021  .5427864  .0269957   .034089  .0333747  .0317934
{txt}{space 8} {...}
{c |}{...}
 {res} .9113124  .8606923   .925623  .8714438  .0416667  .0456529  .0458344  .0451275
{txt}{space 8} {...}
{c |}{...}
 {res} 1.677998       1.5  1.554186  1.039716  .0509236  .0716299  .0771097  .0509236
{txt}{space 8} {...}
{c |}{...}
 {res} 2.198526         2         2         2  .1049699  .5484919  .1892778  .2900832
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758   2.18019  2.075669  2.227447  .1892778  1.507498  .3785666  .4814685
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2010} {...}
{c |}{...}
 {res}      133       132       119       117       130       133       119       115
{txt}{space 8} {...}
{c |}{...}
 {res}-.3977271  .1512313   .147156   .373014  .0012334  .0009548  .0010896  .0009548
{txt}{space 8} {...}
{c |}{...}
 {res} .2465823  .1963759  .3499937  .3987179  .0013572  .0009679  .0011863  .0009681
{txt}{space 8} {...}
{c |}{...}
 {res} .4237922  .4478214  .4528107  .4525476  .0031186  .0020998  .0016814  .0017773
{txt}{space 8} {...}
{c |}{...}
 {res} .4832572  .4999954  .4999954  .4999971  .0161982  .0168009  .0161982  .0168009
{txt}{space 8} {...}
{c |}{...}
 {res} .5191119  .5523732  .6413173  .5644325  .0333747  .0302411  .0310469  .0302411
{txt}{space 8} {...}
{c |}{...}
 {res} .8809249  .8654645  .8878431  .8549329  .0458334  .0452245  .0475127  .0416667
{txt}{space 8} {...}
{c |}{...}
 {res}  1.18019  1.387843   1.31981   1.18019  .0771097   .062456  .0771097  .0609752
{txt}{space 8} {...}
{c |}{...}
 {res}        2         2         2  1.998511  .4814685  .8422771  .4814685  .7610792
{txt}{space 8} {...}
{c |}{...}
 {res} 2.052758  2.137891  2.301654  2.137891  .4814685  1.343867  .4814685  .8422771
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2011} {...}
{c |}{...}
 {res}      128       129       118       109       133       129       121       110
{txt}{space 8} {...}
{c |}{...}
 {res} .2937388   .195637  .1775103  .1824232  .0009353  .0010451  .0010172  .0012334
{txt}{space 8} {...}
{c |}{...}
 {res} .3656104  .1984444  .2630026  .2047173  .0013468  .0013309  .0010408  .0013926
{txt}{space 8} {...}
{c |}{...}
 {res}    .4588  .4081825  .4094035  .3938578  .0072697  .0029226  .0022659  .0134917
{txt}{space 8} {...}
{c |}{...}
 {res} .4999939  .4763441  .4999797  .4660489  .0221884  .0197916  .0147996  .0235942
{txt}{space 8} {...}
{c |}{...}
 {res} .5488494  .5119577  .5335801   .506201  .0329217   .030719  .0306222  .0350504
{txt}{space 8} {...}
{c |}{...}
 {res}  1.31981  .6000421  .9098366  .8484428  .0469237  .0458355  .0416667  .0452245
{txt}{space 8} {...}
{c |}{...}
 {res}        2  1.754046  1.865619  1.975449  .0771097  .0771097  .0771097  .3164557
{txt}{space 8} {...}
{c |}{...}
 {res} 2.365619  2.310427  2.240536  2.327469  .7213474  1.347101  .5655572  .8683333
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758   2.31981  2.247057  2.452254  .7781211  1.569812  .7210329  .9375745
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2012} {...}
{c |}{...}
 {res}      131       128       125       118       132       128       126       118
{txt}{space 8} {...}
{c |}{...}
 {res} .1934183 -.3144251 -.3171021 -.3144251  .0013468  .0008905  .0008926  .0016732
{txt}{space 8} {...}
{c |}{...}
 {res} .1934183 -.3144251 -.3171021  .1751503  .0013468  .0008905  .0008926  .0016732
{txt}{space 8} {...}
{c |}{...}
 {res} .4016765  .4142133  .3987179  .3999581  .0101958  .0162562  .0093421  .0161982
{txt}{space 8} {...}
{c |}{...}
 {res} .4999797  .4999939  .4999797  .4718301  .0222795  .0229797  .0193721  .0240148
{txt}{space 8} {...}
{c |}{...}
 {res}  .511584  .5302333   .519384  .5168567  .0333747   .035938  .0322331  .0346855
{txt}{space 8} {...}
{c |}{...}
 {res} .9063154  .6381448   .658035  .6197092  .0458355  .0498241  .0416667  .0434553
{txt}{space 8} {...}
{c |}{...}
 {res} 1.952254  2.034857         2  1.908029  .0771097  .1646045  .0537441  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res}  2.30136  2.480755  2.259464   2.18019  .6275404   1.25984  .2837696  .8522774
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5       2.5  2.259464  2.408029  .6936836  1.508821  .6275404  1.025623
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2013} {...}
{c |}{...}
 {res}      134       136       124       122       134       135       122       122
{txt}{space 8} {...}
{c |}{...}
 {res} .2005816 -.3215876  .3346955  .3841553   .000781  .0008905  .0009881  .0009816
{txt}{space 8} {...}
{c |}{...}
 {res} .3689205 -.3215876  .3346955  .3864128  .0011886  .0009005  .0010168  .0010372
{txt}{space 8} {...}
{c |}{...}
 {res} .4298168  .4350302  .4180752  .4507742  .0101958  .0162686  .0142829  .0158233
{txt}{space 8} {...}
{c |}{...}
 {res} .4681536  .4766654  .4711035  .4912959  .0197942  .0234845  .0222795  .0237483
{txt}{space 8} {...}
{c |}{...}
 {res} .5000166  .5221148  .5031013  .5162137  .0308539   .034089  .0285545  .0328871
{txt}{space 8} {...}
{c |}{...}
 {res} .6135935  .6648329  .8172006  .6000421  .0458355  .0458355  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.933431         2       1.5   1.81981  .0771097  .0674058  .0549278  .0771097
{txt}{space 8} {...}
{c |}{...}
 {res}  2.18019  2.354774  2.134381  2.239596  .6515197  1.023655  .3653927  .9837344
{txt}{space 8} {...}
{c |}{...}
 {res} 2.259464  2.471956  2.259464  2.452254  .6637046  1.571215  .6839807  .9837344
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2014} {...}
{c |}{...}
 {res}      142       143       125       131       139       140       126       129
{txt}{space 8} {...}
{c |}{...}
 {res}-.4027533 -.3215876  .3844568  .1710038  .0008119  .0009005  .0013556  .0026221
{txt}{space 8} {...}
{c |}{...}
 {res}-.3215876 -.3215876  .3863068  .1920056  .0009005  .0009005  .0013643  .0030312
{txt}{space 8} {...}
{c |}{...}
 {res} .4510531  .4442667  .4377857  .4370997  .0112719  .0132613  .0126881  .0157448
{txt}{space 8} {...}
{c |}{...}
 {res} .4886516  .4890733  .4886516  .4678339  .0204732  .0216644  .0216671  .0211176
{txt}{space 8} {...}
{c |}{...}
 {res}  .517687  .5279304  .5136368  .5199678  .0312133  .0314377  .0312035  .0310469
{txt}{space 8} {...}
{c |}{...}
 {res} .6081136  .5911287   .600906  .6003443  .0416667  .0458334  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.888451         2       1.5  1.809356  .0580075  .0661502   .061071  .0763911
{txt}{space 8} {...}
{c |}{...}
 {res} 2.052758  2.391918         2   2.18019  .3450687  .9005532  .0961309  .9005532
{txt}{space 8} {...}
{c |}{...}
 {res} 2.058998   2.46192         2   2.18019  .6401314  1.235562  .3642727  1.005608
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2015} {...}
{c |}{...}
 {res}      124       128       116       105       126       127       115       103
{txt}{space 8} {...}
{c |}{...}
 {res} .1839519  .1733932  .1490978  .1843463  .0010527  .0012369  .0009314  .0015108
{txt}{space 8} {...}
{c |}{...}
 {res} .1871504  .1978807  .1585348  .2173227   .001223  .0013686  .0009544   .001615
{txt}{space 8} {...}
{c |}{...}
 {res} .4660489  .4660489  .4298031   .451672  .0032489  .0034998  .0032165  .0120654
{txt}{space 8} {...}
{c |}{...}
 {res} .4999939  .4999954  .4801751   .497461  .0144251  .0216504  .0189756  .0219766
{txt}{space 8} {...}
{c |}{...}
 {res} .5231186  .5282537  .5332189   .521318  .0267614  .0354011  .0283082  .0333747
{txt}{space 8} {...}
{c |}{...}
 {res} .8456588  .8482137  .8499682  .6155317  .0458334  .0528544  .0425076  .0458355
{txt}{space 8} {...}
{c |}{...}
 {res}  1.81981  2.112157  1.498403  1.654129  .0640564  .0961309  .0528544  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.402553  1.897328  2.259464  .6383263  1.257799  .6219261  .9846169
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.404325  1.954818  2.259464  .6602784  1.477984  .6625603  .9926203
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2016} {...}
{c |}{...}
 {res}      129       129       123       120       129       129       122       120
{txt}{space 8} {...}
{c |}{...}
 {res} -.344821  .2018191  .1647752  .3992301  .0009641  .0029045  .0011952  .0126881
{txt}{space 8} {...}
{c |}{...}
 {res} .1905328  .2018191  .1811113  .3999581  .0009781  .0029045  .0014385  .0133916
{txt}{space 8} {...}
{c |}{...}
 {res} .4616257  .4660489  .4143674  .4517252  .0101958  .0138345  .0065794  .0150217
{txt}{space 8} {...}
{c |}{...}
 {res} .4999925  .4999984  .4748791  .4880864  .0218125  .0226753  .0171408   .025286
{txt}{space 8} {...}
{c |}{...}
 {res} .5349074  .5461128  .5206167  .5206167  .0291921   .034089  .0235173  .0356494
{txt}{space 8} {...}
{c |}{...}
 {res} 1.676232  1.813053  .8333183  1.075958  .0416667  .0553936  .0369229  .0464077
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.200922  1.952254  1.995174  .0961309  .4301986   .061071  .2375576
{txt}{space 8} {...}
{c |}{...}
 {res}  2.52181       2.5  2.259464  2.259464  .6549093  1.012574  .3261371  .8783811
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758  2.552758  2.259464  2.259464  .6612499  1.239815  .6704337  .9575923
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2017} {...}
{c |}{...}
 {res}      116       110       121       119       112       113       117       117
{txt}{space 8} {...}
{c |}{...}
 {res} .2438469  .2267467  .3802912  .1811113  .0030726  .0017094  .0015329  .0012351
{txt}{space 8} {...}
{c |}{...}
 {res} .3802912   .234828  .4131187  .1811113  .0051214  .0022458  .0018907  .0016579
{txt}{space 8} {...}
{c |}{...}
 {res} .4681536   .497916  .4557476    .43298  .0126881  .0149546  .0129418  .0090403
{txt}{space 8} {...}
{c |}{...}
 {res} .4949645  .5113444  .4880811  .4892333  .0169175  .0238372  .0189723  .0197916
{txt}{space 8} {...}
{c |}{...}
 {res} .5308844  .5529665  .5199678   .521318    .02349   .034089  .0261168  .0307192
{txt}{space 8} {...}
{c |}{...}
 {res} .6387452  1.740536  .8369438  .8495822   .034089  .0558335  .0422996  .0495961
{txt}{space 8} {...}
{c |}{...}
 {res}        2  2.042975  1.865619         2  .0688997  .2548146  .0771097  .2189039
{txt}{space 8} {...}
{c |}{...}
 {res}  2.31981       2.5  2.452254  2.188132  .2005637  1.314764  .3359221  .9462877
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5  2.555054       2.5  2.209035  .6484724  1.440991  .4457037  .9933939
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2018} {...}
{c |}{...}
 {res}      112       104       111       103       113       107       114       106
{txt}{space 8} {...}
{c |}{...}
 {res} .2008703   .199173 -.3550673  .2006785  .0011571  .0033188  .0010559  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .2094142   .199173    .17098  .2044044  .0027602  .0034244  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res}   .43298  .2617707  .4131187  .3802912  .0101958  .0072162  .0073694  .0159731
{txt}{space 8} {...}
{c |}{...}
 {res} .4988639  .4595056  .4683539  .4834556   .018839  .0222979  .0159259  .0225003
{txt}{space 8} {...}
{c |}{...}
 {res} .5301345  .5032135   .524939  .5262088  .0237681    .03174  .0331136  .0361722
{txt}{space 8} {...}
{c |}{...}
 {res} .6412851  .6033382  1.740536   1.81981  .0399272  .0455623  .0456282  .0528544
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.091971         2   2.16973  .0771097  .2251021  .0771097  .6818818
{txt}{space 8} {...}
{c |}{...}
 {res} 2.612157       2.5       2.5  2.376003  .2842835  1.083302  .2189039  .9253491
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.405688  .5722811  1.327372  .3197745  .9485202
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2019} {...}
{c |}{...}
 {res}       29        28        27        24        29        28        28        25
{txt}{space 8} {...}
{c |}{...}
 {res} .1704768  .1973259  .1720101  .4388236  .0031208  .0034597  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .1704768  .1973259  .1720101  .4388236  .0031208  .0034597  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .3802912  .4340274  .4505311  .4660489  .0083913  .0104715  .0132933  .0089383
{txt}{space 8} {...}
{c |}{...}
 {res} .4831575  .4999861  .4999925  .4999861   .018839  .0249026   .016868  .0221884
{txt}{space 8} {...}
{c |}{...}
 {res} .5244743  .5503269  .5289727  .5452662  .0247971  .0345313   .026671  .0345313
{txt}{space 8} {...}
{c |}{...}
 {res} .5674579  2.001893  .5646833  .7176338  .0411887  .0718345  .0416667  .0458355
{txt}{space 8} {...}
{c |}{...}
 {res} 2.091971  2.299445         2   1.87159  .0509236  .8437727  .0547184  .3900755
{txt}{space 8} {...}
{c |}{...}
 {res} 2.287518  2.512724  2.177998   2.19471  .8437727  1.525294   .509048  .8512501
{txt}{space 8} {...}
{c |}{...}
 {res} 2.287518  2.512724  2.177998   2.19471  .8437727  1.525294   .509048  .8512501
{txt}{hline 9}{c +}{hline 80}
{ralign 8:Total} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{space 8} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{space 8} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{space 8} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{space 8} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{space 8} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}macros:
             r(name13) : "{res}2019{txt}"
             r(name12) : "{res}2018{txt}"
             r(name11) : "{res}2017{txt}"
             r(name10) : "{res}2016{txt}"
              r(name9) : "{res}2015{txt}"
              r(name8) : "{res}2014{txt}"
              r(name7) : "{res}2013{txt}"
              r(name6) : "{res}2012{txt}"
              r(name5) : "{res}2011{txt}"
              r(name4) : "{res}2010{txt}"
              r(name3) : "{res}2009{txt}"
              r(name2) : "{res}2008{txt}"
              r(name1) : "{res}2007{txt}"

matrices:
             r(Stat13) : {res} 10 x 8
             {txt}r(Stat12) : {res} 10 x 8
             {txt}r(Stat11) : {res} 10 x 8
             {txt}r(Stat10) : {res} 10 x 8
              {txt}r(Stat9) : {res} 10 x 8
              {txt}r(Stat8) : {res} 10 x 8
              {txt}r(Stat7) : {res} 10 x 8
              {txt}r(Stat6) : {res} 10 x 8
              {txt}r(Stat5) : {res} 10 x 8
              {txt}r(Stat4) : {res} 10 x 8
              {txt}r(Stat3) : {res} 10 x 8
              {txt}r(Stat2) : {res} 10 x 8
              {txt}r(Stat1) : {res} 10 x 8
          {txt}r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("byYear")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF_IndDens.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. *****************************
. **   Summary Stats of SPF  **
. *****************************
.                           
.           
. * table 1
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. * table 2
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. * table 3
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) by(year) save

{txt}Summary statistics: N, min, p1, p10, p25, p50, p75, p90, p99, max
  by categories of: year 

{ralign 8:year} {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:2007} {...}
{c |}{...}
 {res}      145       143       134       121       148       144       134       127
{txt}{space 8} {...}
{c |}{...}
 {res} .1719569  .1835053  .1719569  .1869803  .0012632  .0034241  .0024833  .0015544
{txt}{space 8} {...}
{c |}{...}
 {res} .2159828  .1869803  .2024634  .2078495  .0024054   .003877  .0024833  .0021125
{txt}{space 8} {...}
{c |}{...}
 {res} .4083881  .3999581  .3863068  .3999581  .0120063  .0130572  .0137511  .0133874
{txt}{space 8} {...}
{c |}{...}
 {res} .4660489  .4594145  .4478214  .4570734  .0182085  .0222979  .0206475  .0221509
{txt}{space 8} {...}
{c |}{...}
 {res} .4999986   .499999  .4999997  .4999993  .0291921  .0333747   .031097    .03174
{txt}{space 8} {...}
{c |}{...}
 {res} .5521101  .5521101  .5958193  .5785294  .0416667  .0416667  .0416667  .0469237
{txt}{space 8} {...}
{c |}{...}
 {res}        2         2         2         2  .0509236  .0661502   .062456  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758  2.552758   2.29576  2.318567  .2590822  .6478894  .2833697  .5852864
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.554057  2.408029  2.341227  .2833697  .8702627   .660483  .7498792
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2008} {...}
{c |}{...}
 {res}      145       137       127       124       147       142       133       125
{txt}{space 8} {...}
{c |}{...}
 {res} .1183248 -.3517563  .2078495  .2078495  .0020192  .0009902  .0021405  .0009902
{txt}{space 8} {...}
{c |}{...}
 {res} .1742715  .1162736  .2201423  .2438183    .00227  .0009967  .0035597  .0010482
{txt}{space 8} {...}
{c |}{...}
 {res} .4270399  .3828181  .3800312  .3999581  .0121568  .0111385  .0148539   .015366
{txt}{space 8} {...}
{c |}{...}
 {res} .4829901  .4748791  .4631231  .4712131  .0222253  .0210636  .0221884  .0222979
{txt}{space 8} {...}
{c |}{...}
 {res} .5000316  .5000009  .4999997  .4999997  .0316621  .0317011  .0291921  .0320954
{txt}{space 8} {...}
{c |}{...}
 {res} .6047483  .5639728  .5708577  .5788914  .0458334  .0458355  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5  2.106994  2.134381  1.952254  .0771097  .0771097  .0509236   .061071
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.251965  .7918601    1.1326  .6340855  .8243796
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.259464  .8514586   1.16971  .7153108  1.093869
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2009} {...}
{c |}{...}
 {res}      129       126       118       112       122       120       112       107
{txt}{space 8} {...}
{c |}{...}
 {res}-.3004756  -.319514 -.2873553  .2487712  .0008074  .0008964  .0008972   .000975
{txt}{space 8} {...}
{c |}{...}
 {res}-.2993531  .2022386  .3198102  .3198102  .0008557  .0009465  .0009932  .0009814
{txt}{space 8} {...}
{c |}{...}
 {res} .4425424  .4272468  .4601073  .4512652  .0017683  .0033229  .0026612  .0023079
{txt}{space 8} {...}
{c |}{...}
 {res} .4999797  .4752366  .4999954  .4883852  .0101958  .0200578  .0170586    .01692
{txt}{space 8} {...}
{c |}{...}
 {res} .6014206  .5334467  .6001021  .5427864  .0269957   .034089  .0333747  .0317934
{txt}{space 8} {...}
{c |}{...}
 {res} .9113124  .8606923   .925623  .8714438  .0416667  .0456529  .0458344  .0451275
{txt}{space 8} {...}
{c |}{...}
 {res} 1.677998       1.5  1.554186  1.039716  .0509236  .0716299  .0771097  .0509236
{txt}{space 8} {...}
{c |}{...}
 {res} 2.198526         2         2         2  .1049699  .5484919  .1892778  .2900832
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758   2.18019  2.075669  2.227447  .1892778  1.507498  .3785666  .4814685
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2010} {...}
{c |}{...}
 {res}      133       132       119       117       130       133       119       115
{txt}{space 8} {...}
{c |}{...}
 {res}-.3977271  .1512313   .147156   .373014  .0012334  .0009548  .0010896  .0009548
{txt}{space 8} {...}
{c |}{...}
 {res} .2465823  .1963759  .3499937  .3987179  .0013572  .0009679  .0011863  .0009681
{txt}{space 8} {...}
{c |}{...}
 {res} .4237922  .4478214  .4528107  .4525476  .0031186  .0020998  .0016814  .0017773
{txt}{space 8} {...}
{c |}{...}
 {res} .4832572  .4999954  .4999954  .4999971  .0161982  .0168009  .0161982  .0168009
{txt}{space 8} {...}
{c |}{...}
 {res} .5191119  .5523732  .6413173  .5644325  .0333747  .0302411  .0310469  .0302411
{txt}{space 8} {...}
{c |}{...}
 {res} .8809249  .8654645  .8878431  .8549329  .0458334  .0452245  .0475127  .0416667
{txt}{space 8} {...}
{c |}{...}
 {res}  1.18019  1.387843   1.31981   1.18019  .0771097   .062456  .0771097  .0609752
{txt}{space 8} {...}
{c |}{...}
 {res}        2         2         2  1.998511  .4814685  .8422771  .4814685  .7610792
{txt}{space 8} {...}
{c |}{...}
 {res} 2.052758  2.137891  2.301654  2.137891  .4814685  1.343867  .4814685  .8422771
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2011} {...}
{c |}{...}
 {res}      128       129       118       109       133       129       121       110
{txt}{space 8} {...}
{c |}{...}
 {res} .2937388   .195637  .1775103  .1824232  .0009353  .0010451  .0010172  .0012334
{txt}{space 8} {...}
{c |}{...}
 {res} .3656104  .1984444  .2630026  .2047173  .0013468  .0013309  .0010408  .0013926
{txt}{space 8} {...}
{c |}{...}
 {res}    .4588  .4081825  .4094035  .3938578  .0072697  .0029226  .0022659  .0134917
{txt}{space 8} {...}
{c |}{...}
 {res} .4999939  .4763441  .4999797  .4660489  .0221884  .0197916  .0147996  .0235942
{txt}{space 8} {...}
{c |}{...}
 {res} .5488494  .5119577  .5335801   .506201  .0329217   .030719  .0306222  .0350504
{txt}{space 8} {...}
{c |}{...}
 {res}  1.31981  .6000421  .9098366  .8484428  .0469237  .0458355  .0416667  .0452245
{txt}{space 8} {...}
{c |}{...}
 {res}        2  1.754046  1.865619  1.975449  .0771097  .0771097  .0771097  .3164557
{txt}{space 8} {...}
{c |}{...}
 {res} 2.365619  2.310427  2.240536  2.327469  .7213474  1.347101  .5655572  .8683333
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758   2.31981  2.247057  2.452254  .7781211  1.569812  .7210329  .9375745
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2012} {...}
{c |}{...}
 {res}      131       128       125       118       132       128       126       118
{txt}{space 8} {...}
{c |}{...}
 {res} .1934183 -.3144251 -.3171021 -.3144251  .0013468  .0008905  .0008926  .0016732
{txt}{space 8} {...}
{c |}{...}
 {res} .1934183 -.3144251 -.3171021  .1751503  .0013468  .0008905  .0008926  .0016732
{txt}{space 8} {...}
{c |}{...}
 {res} .4016765  .4142133  .3987179  .3999581  .0101958  .0162562  .0093421  .0161982
{txt}{space 8} {...}
{c |}{...}
 {res} .4999797  .4999939  .4999797  .4718301  .0222795  .0229797  .0193721  .0240148
{txt}{space 8} {...}
{c |}{...}
 {res}  .511584  .5302333   .519384  .5168567  .0333747   .035938  .0322331  .0346855
{txt}{space 8} {...}
{c |}{...}
 {res} .9063154  .6381448   .658035  .6197092  .0458355  .0498241  .0416667  .0434553
{txt}{space 8} {...}
{c |}{...}
 {res} 1.952254  2.034857         2  1.908029  .0771097  .1646045  .0537441  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res}  2.30136  2.480755  2.259464   2.18019  .6275404   1.25984  .2837696  .8522774
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5       2.5  2.259464  2.408029  .6936836  1.508821  .6275404  1.025623
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2013} {...}
{c |}{...}
 {res}      134       136       124       122       134       135       122       122
{txt}{space 8} {...}
{c |}{...}
 {res} .2005816 -.3215876  .3346955  .3841553   .000781  .0008905  .0009881  .0009816
{txt}{space 8} {...}
{c |}{...}
 {res} .3689205 -.3215876  .3346955  .3864128  .0011886  .0009005  .0010168  .0010372
{txt}{space 8} {...}
{c |}{...}
 {res} .4298168  .4350302  .4180752  .4507742  .0101958  .0162686  .0142829  .0158233
{txt}{space 8} {...}
{c |}{...}
 {res} .4681536  .4766654  .4711035  .4912959  .0197942  .0234845  .0222795  .0237483
{txt}{space 8} {...}
{c |}{...}
 {res} .5000166  .5221148  .5031013  .5162137  .0308539   .034089  .0285545  .0328871
{txt}{space 8} {...}
{c |}{...}
 {res} .6135935  .6648329  .8172006  .6000421  .0458355  .0458355  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.933431         2       1.5   1.81981  .0771097  .0674058  .0549278  .0771097
{txt}{space 8} {...}
{c |}{...}
 {res}  2.18019  2.354774  2.134381  2.239596  .6515197  1.023655  .3653927  .9837344
{txt}{space 8} {...}
{c |}{...}
 {res} 2.259464  2.471956  2.259464  2.452254  .6637046  1.571215  .6839807  .9837344
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2014} {...}
{c |}{...}
 {res}      142       143       125       131       139       140       126       129
{txt}{space 8} {...}
{c |}{...}
 {res}-.4027533 -.3215876  .3844568  .1710038  .0008119  .0009005  .0013556  .0026221
{txt}{space 8} {...}
{c |}{...}
 {res}-.3215876 -.3215876  .3863068  .1920056  .0009005  .0009005  .0013643  .0030312
{txt}{space 8} {...}
{c |}{...}
 {res} .4510531  .4442667  .4377857  .4370997  .0112719  .0132613  .0126881  .0157448
{txt}{space 8} {...}
{c |}{...}
 {res} .4886516  .4890733  .4886516  .4678339  .0204732  .0216644  .0216671  .0211176
{txt}{space 8} {...}
{c |}{...}
 {res}  .517687  .5279304  .5136368  .5199678  .0312133  .0314377  .0312035  .0310469
{txt}{space 8} {...}
{c |}{...}
 {res} .6081136  .5911287   .600906  .6003443  .0416667  .0458334  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.888451         2       1.5  1.809356  .0580075  .0661502   .061071  .0763911
{txt}{space 8} {...}
{c |}{...}
 {res} 2.052758  2.391918         2   2.18019  .3450687  .9005532  .0961309  .9005532
{txt}{space 8} {...}
{c |}{...}
 {res} 2.058998   2.46192         2   2.18019  .6401314  1.235562  .3642727  1.005608
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2015} {...}
{c |}{...}
 {res}      124       128       116       105       126       127       115       103
{txt}{space 8} {...}
{c |}{...}
 {res} .1839519  .1733932  .1490978  .1843463  .0010527  .0012369  .0009314  .0015108
{txt}{space 8} {...}
{c |}{...}
 {res} .1871504  .1978807  .1585348  .2173227   .001223  .0013686  .0009544   .001615
{txt}{space 8} {...}
{c |}{...}
 {res} .4660489  .4660489  .4298031   .451672  .0032489  .0034998  .0032165  .0120654
{txt}{space 8} {...}
{c |}{...}
 {res} .4999939  .4999954  .4801751   .497461  .0144251  .0216504  .0189756  .0219766
{txt}{space 8} {...}
{c |}{...}
 {res} .5231186  .5282537  .5332189   .521318  .0267614  .0354011  .0283082  .0333747
{txt}{space 8} {...}
{c |}{...}
 {res} .8456588  .8482137  .8499682  .6155317  .0458334  .0528544  .0425076  .0458355
{txt}{space 8} {...}
{c |}{...}
 {res}  1.81981  2.112157  1.498403  1.654129  .0640564  .0961309  .0528544  .0961309
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.402553  1.897328  2.259464  .6383263  1.257799  .6219261  .9846169
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.404325  1.954818  2.259464  .6602784  1.477984  .6625603  .9926203
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2016} {...}
{c |}{...}
 {res}      129       129       123       120       129       129       122       120
{txt}{space 8} {...}
{c |}{...}
 {res} -.344821  .2018191  .1647752  .3992301  .0009641  .0029045  .0011952  .0126881
{txt}{space 8} {...}
{c |}{...}
 {res} .1905328  .2018191  .1811113  .3999581  .0009781  .0029045  .0014385  .0133916
{txt}{space 8} {...}
{c |}{...}
 {res} .4616257  .4660489  .4143674  .4517252  .0101958  .0138345  .0065794  .0150217
{txt}{space 8} {...}
{c |}{...}
 {res} .4999925  .4999984  .4748791  .4880864  .0218125  .0226753  .0171408   .025286
{txt}{space 8} {...}
{c |}{...}
 {res} .5349074  .5461128  .5206167  .5206167  .0291921   .034089  .0235173  .0356494
{txt}{space 8} {...}
{c |}{...}
 {res} 1.676232  1.813053  .8333183  1.075958  .0416667  .0553936  .0369229  .0464077
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.200922  1.952254  1.995174  .0961309  .4301986   .061071  .2375576
{txt}{space 8} {...}
{c |}{...}
 {res}  2.52181       2.5  2.259464  2.259464  .6549093  1.012574  .3261371  .8783811
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758  2.552758  2.259464  2.259464  .6612499  1.239815  .6704337  .9575923
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2017} {...}
{c |}{...}
 {res}      116       110       121       119       112       113       117       117
{txt}{space 8} {...}
{c |}{...}
 {res} .2438469  .2267467  .3802912  .1811113  .0030726  .0017094  .0015329  .0012351
{txt}{space 8} {...}
{c |}{...}
 {res} .3802912   .234828  .4131187  .1811113  .0051214  .0022458  .0018907  .0016579
{txt}{space 8} {...}
{c |}{...}
 {res} .4681536   .497916  .4557476    .43298  .0126881  .0149546  .0129418  .0090403
{txt}{space 8} {...}
{c |}{...}
 {res} .4949645  .5113444  .4880811  .4892333  .0169175  .0238372  .0189723  .0197916
{txt}{space 8} {...}
{c |}{...}
 {res} .5308844  .5529665  .5199678   .521318    .02349   .034089  .0261168  .0307192
{txt}{space 8} {...}
{c |}{...}
 {res} .6387452  1.740536  .8369438  .8495822   .034089  .0558335  .0422996  .0495961
{txt}{space 8} {...}
{c |}{...}
 {res}        2  2.042975  1.865619         2  .0688997  .2548146  .0771097  .2189039
{txt}{space 8} {...}
{c |}{...}
 {res}  2.31981       2.5  2.452254  2.188132  .2005637  1.314764  .3359221  .9462877
{txt}{space 8} {...}
{c |}{...}
 {res}      2.5  2.555054       2.5  2.209035  .6484724  1.440991  .4457037  .9933939
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2018} {...}
{c |}{...}
 {res}      112       104       111       103       113       107       114       106
{txt}{space 8} {...}
{c |}{...}
 {res} .2008703   .199173 -.3550673  .2006785  .0011571  .0033188  .0010559  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .2094142   .199173    .17098  .2044044  .0027602  .0034244  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res}   .43298  .2617707  .4131187  .3802912  .0101958  .0072162  .0073694  .0159731
{txt}{space 8} {...}
{c |}{...}
 {res} .4988639  .4595056  .4683539  .4834556   .018839  .0222979  .0159259  .0225003
{txt}{space 8} {...}
{c |}{...}
 {res} .5301345  .5032135   .524939  .5262088  .0237681    .03174  .0331136  .0361722
{txt}{space 8} {...}
{c |}{...}
 {res} .6412851  .6033382  1.740536   1.81981  .0399272  .0455623  .0456282  .0528544
{txt}{space 8} {...}
{c |}{...}
 {res} 2.134381  2.091971         2   2.16973  .0771097  .2251021  .0771097  .6818818
{txt}{space 8} {...}
{c |}{...}
 {res} 2.612157       2.5       2.5  2.376003  .2842835  1.083302  .2189039  .9253491
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.552758       2.5  2.405688  .5722811  1.327372  .3197745  .9485202
{txt}{hline 9}{c +}{hline 80}
{ralign 8:2019} {...}
{c |}{...}
 {res}       29        28        27        24        29        28        28        25
{txt}{space 8} {...}
{c |}{...}
 {res} .1704768  .1973259  .1720101  .4388236  .0031208  .0034597  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .1704768  .1973259  .1720101  .4388236  .0031208  .0034597  .0011913  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .3802912  .4340274  .4505311  .4660489  .0083913  .0104715  .0132933  .0089383
{txt}{space 8} {...}
{c |}{...}
 {res} .4831575  .4999861  .4999925  .4999861   .018839  .0249026   .016868  .0221884
{txt}{space 8} {...}
{c |}{...}
 {res} .5244743  .5503269  .5289727  .5452662  .0247971  .0345313   .026671  .0345313
{txt}{space 8} {...}
{c |}{...}
 {res} .5674579  2.001893  .5646833  .7176338  .0411887  .0718345  .0416667  .0458355
{txt}{space 8} {...}
{c |}{...}
 {res} 2.091971  2.299445         2   1.87159  .0509236  .8437727  .0547184  .3900755
{txt}{space 8} {...}
{c |}{...}
 {res} 2.287518  2.512724  2.177998   2.19471  .8437727  1.525294   .509048  .8512501
{txt}{space 8} {...}
{c |}{...}
 {res} 2.287518  2.512724  2.177998   2.19471  .8437727  1.525294   .509048  .8512501
{txt}{hline 9}{c +}{hline 80}
{ralign 8:Total} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{space 8} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{space 8} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{space 8} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{space 8} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{space 8} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{space 8} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{space 8} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{space 8} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{space 8} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}macros:
             r(name13) : "{res}2019{txt}"
             r(name12) : "{res}2018{txt}"
             r(name11) : "{res}2017{txt}"
             r(name10) : "{res}2016{txt}"
              r(name9) : "{res}2015{txt}"
              r(name8) : "{res}2014{txt}"
              r(name7) : "{res}2013{txt}"
              r(name6) : "{res}2012{txt}"
              r(name5) : "{res}2011{txt}"
              r(name4) : "{res}2010{txt}"
              r(name3) : "{res}2009{txt}"
              r(name2) : "{res}2008{txt}"
              r(name1) : "{res}2007{txt}"

matrices:
             r(Stat13) : {res} 10 x 8
             {txt}r(Stat12) : {res} 10 x 8
             {txt}r(Stat11) : {res} 10 x 8
             {txt}r(Stat10) : {res} 10 x 8
              {txt}r(Stat9) : {res} 10 x 8
              {txt}r(Stat8) : {res} 10 x 8
              {txt}r(Stat7) : {res} 10 x 8
              {txt}r(Stat6) : {res} 10 x 8
              {txt}r(Stat5) : {res} 10 x 8
              {txt}r(Stat4) : {res} 10 x 8
              {txt}r(Stat3) : {res} 10 x 8
              {txt}r(Stat2) : {res} 10 x 8
              {txt}r(Stat1) : {res} 10 x 8
          {txt}r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(Stat)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:c1}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:r1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:        .}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("byYear")
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. helo forvalues
{err}unrecognized command:  helo
{txt}{search r(199):r(199);}

{com}. help forval

. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF&SumStat_IndDst.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. *****************************
. **   Summary Stats of SPF  **
. *****************************
.                           
.           
. * table 1
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. * table 2
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. *********************************
. **   Time Series Graph of SPF  **
. *********************************
.                           
. 
. ******************************
. **   More Series Charts   ****
. ******************************
. 
. foreach mom in Mean Var{c -(}
{txt}  2{com}.    foreach var in PRCCPI PRCPCE{c -(}
{txt}  3{com}.     forvalues i=0/1{c -(}
{txt}  4{com}.      egen `var'`mom'`i'p75 =pctile(`var'`mom'`i'),p(75) by(dateQ)
{txt}  5{com}.          egen `var'`mom'`i'p25 =pctile(`var'`mom'`i'),p(25) by(dateQ)
{txt}  6{com}.          local lb: variable label `var'`mom'`i'
{txt}  7{com}.          label var `var'`mom'`i'p75 "`lb': 75 pctile"
{txt}  8{com}.          label var `var'`mom'`i'p25 "`lb': 25 pctile"
{txt}  9{com}.  {c )-}
{txt} 10{com}.  {c )-}
{txt} 11{com}. {c )-}
{err}variable dateQ not found
(error in option {bf:by()})
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF&SumStat_IndDst.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. *****************************
. **   Summary Stats of SPF  **
. *****************************
.                           
.           
. * table 1
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. * table 2
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. *********************************
. **   Time Series Graph of SPF  **
. *********************************
.                           
. 
. ******************************
. **   More Series Charts   ****
. ******************************
. 
. foreach mom in Mean Var{c -(}
{txt}  2{com}.    foreach var in PRCCPI PRCPCE{c -(}
{txt}  3{com}.     forvalues i=0/1{c -(}
{txt}  4{com}.      egen `var'`mom'`i'p75 =pctile(`var'`mom'`i'),p(75) by(year quarter)
{txt}  5{com}.          egen `var'`mom'`i'p25 =pctile(`var'`mom'`i'),p(25) by(year quarter)
{txt}  6{com}.          local lb: variable label `var'`mom'`i'
{txt}  7{com}.          label var `var'`mom'`i'p75 "`lb': 75 pctile"
{txt}  8{com}.          label var `var'`mom'`i'p25 "`lb': 25 pctile"
{txt}  9{com}.  {c )-}
{txt} 10{com}.  {c )-}
{txt} 11{com}. {c )-}
{txt}(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)

{com}. 
. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step02d_CleaningSPF&SumStat_IndDst.do"
{txt}
{com}. *******************************************************************************
. ** This do file cleans the density/moment estimats of individual SPF 
. ** InfExpSPFDstIndQ.dta. 
. ** And then it generates the population moments from SPF. InfExpSPFDstPopQ.dta.
. ** This data is quarterly. So one may need to convert SCE to quarterly for a 
. ** comparison of the two. 
. ********************************************************************************* 
. 
. clear 
{txt}
{com}. set more off 
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global datafolder "${c -(}mainfolder{c )-}/SurveyData/SPF/individual"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}datafolder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/individual
{txt}
{com}. 
. use InfExpSPFDstIndQ,clear
{txt}
{com}. 
. 
. local Moments PRCCPIMean0 PRCCPIMean1 PRCPCEMean0 PRCPCEMean1 /// 
>               PRCCPIVar0 PRCCPIVar1 PRCPCEVar0 PRCPCEVar1
{txt}
{com}. 
. *****************************
. **   Summary Stats of SPF  **
. *****************************
.                           
.           
. * table 1
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save 

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1628      1606      1518      1453      1628      1606      1518      1453
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-26472.67 -18576.11 -14787.64 -4144.223 -574.5461 -423879.7 -77.18375 -1351.355
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3557954 -.3144251  .0007294  .0008905  .0008926  .0009548
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4318608  .4180752  .4155341  .4188922  .0073694  .0066313  .0058931  .0104073
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4885004  .4883978  .4829901  .4807022  .0174449  .0218019  .0189756  .0221884
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5241744  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8643356  .6652987  .8650593  .6942495  .0446446  .0464889  .0424704  .0458355
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res}        2         2  1.908029  1.993781  .0771097  .0961309  .0771097  .0961309
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res}  2.68019  2.555522       2.5  2.452254  .8783811  1.571215  .8783811    1.1326
{txt}{ralign 8:max} {...}
{c |}{...}
 {res} 8.763064  18618.39  996.2262  3.331012  967.4245   3367980  1.14e+07  111391.2
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-26472.67}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .4318608}}}{space 1}{space 1}{ralign 9:{res:{sf: .4885004}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8643356}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-18576.11}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .4180752}}}{space 1}{space 1}{ralign 9:{res:{sf: .4883978}}}{space 1}{space 1}{ralign 9:{res:{sf: .5241744}}}{space 1}{space 1}{ralign 9:{res:{sf: .6652987}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-14787.64}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3557954}}}{space 1}{space 1}{ralign 9:{res:{sf: .4155341}}}{space 1}{space 1}{ralign 9:{res:{sf: .4829901}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8650593}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.908029}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-4144.223}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .4188922}}}{space 1}{space 1}{ralign 9:{res:{sf: .4807022}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6942495}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.993781}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf:-574.5461}}}{space 1}{space 1}{ralign 9:{res:{sf: .0007294}}}{space 1}{space 1}{ralign 9:{res:{sf: .0073694}}}{space 1}{space 1}{ralign 9:{res:{sf: .0174449}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0446446}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1606}}}{space 1}{space 1}{ralign 9:{res:{sf:-423879.7}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0066313}}}{space 1}{space 1}{ralign 9:{res:{sf: .0218019}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0464889}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1518}}}{space 1}{space 1}{ralign 9:{res:{sf:-77.18375}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0058931}}}{space 1}{space 1}{ralign 9:{res:{sf: .0189756}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0424704}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1453}}}{space 1}{space 1}{ralign 9:{res:{sf:-1351.355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0104073}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221884}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458355}}}{space 1}{space 1}{ralign 9:{res:{sf: .0961309}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}{space 1}{ralign 9:{res:{sf: 8.763064}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.555522}}}{space 1}{space 1}{ralign 9:{res:{sf: 18618.39}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 996.2262}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.331012}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 967.4245}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}{space 1}{ralign 9:{res:{sf:  3367980}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .8783811}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.14e+07}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   1.1326}}}{space 1}{space 1}{ralign 9:{res:{sf: 111391.2}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify  
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("rawdata") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. 
.       egen `var'p1=pctile(`var'),p(1)
{txt}  3{com}.           egen `var'p99=pctile(`var'),p(99)
{txt}  4{com}.           replace `var' = . if `var' <`var'p1 | (`var' >`var'p99 & `var'!=.)
{txt}  5{com}. {c )-}
{txt}(31 real changes made, 31 to missing)
(33 real changes made, 33 to missing)
(30 real changes made, 30 to missing)
(28 real changes made, 28 to missing)
(34 real changes made, 34 to missing)
(31 real changes made, 31 to missing)
(29 real changes made, 29 to missing)
(29 real changes made, 29 to missing)

{com}. 
. * table 2
. tabstat `Moments', st(N min p1 p10 p25 p50 p75 p90 p99 max) save

{txt}   stats {...}
{c |}{...}
  PRCCP~n0  PRCCP~n1  PRCPC~n0  PRCPC~n1  PRCCP~r0  PRCCP~r1  PRCPC~r0  PRCPC~r1
{hline 9}{c +}{hline 80}
{ralign 8:N} {...}
{c |}{...}
 {res}     1597      1573      1488      1425      1594      1575      1489      1424
{txt}{ralign 8:min} {...}
{c |}{...}
 {res}-.4027533 -.3517563 -.3550673 -.3144251   .000781  .0008905  .0008926  .0009548
{txt}{ralign 8:p1} {...}
{c |}{...}
 {res} .1839519  .1162736  .1811113  .2044044  .0011571  .0009679  .0010615  .0010894
{txt}{ralign 8:p10} {...}
{c |}{...}
 {res} .4360281  .4270399  .4255956  .4270399  .0095803  .0088585  .0072885  .0130076
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res} .4900766  .4892362  .4832073  .4832572  .0180595  .0221731    .01937  .0222012
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .5203517  .5240564  .5199678  .5206167  .0291921  .0333747  .0291921  .0333747
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} .8582156  .6422359  .8628509  .6701552  .0438226  .0462024  .0416667  .0458334
{txt}{ralign 8:p90} {...}
{c |}{...}
 {res} 1.998511         2  1.865619  1.947242  .0771097  .0771097  .0661502   .092026
{txt}{ralign 8:p99} {...}
{c |}{...}
 {res} 2.552758       2.5  2.303137  2.259464  .6345832  1.239815  .4814685  .9142628
{txt}{ralign 8:max} {...}
{c |}{...}
 {res}  2.68019  2.555054       2.5  2.452254  .8514586  1.571215  .7210329  1.093869
{txt}{hline 9}{c BT}{hline 80}

{com}. 
. return list

{txt}matrices:
          r(StatTotal) : {res} 10 x 8
{txt}
{com}. mat T = r(StatTotal)'
{txt}
{com}. matlist T
{res}
{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:N}{space 1}{space 1}{ralign 9:min}{space 1}{space 1}{ralign 9:p1}{space 1}{space 1}{ralign 9:p10}{space 1}{space 1}{ralign 9:p25}{space 1}{space 1}{ralign 9:p50}{space 1}{space 1}{ralign 9:p75}{space 1}{space 1}{ralign 9:p90}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1597}}}{space 1}{space 1}{ralign 9:{res:{sf:-.4027533}}}{space 1}{space 1}{ralign 9:{res:{sf: .1839519}}}{space 1}{space 1}{ralign 9:{res:{sf: .4360281}}}{space 1}{space 1}{ralign 9:{res:{sf: .4900766}}}{space 1}{space 1}{ralign 9:{res:{sf: .5203517}}}{space 1}{space 1}{ralign 9:{res:{sf: .8582156}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.998511}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1573}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3517563}}}{space 1}{space 1}{ralign 9:{res:{sf: .1162736}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4892362}}}{space 1}{space 1}{ralign 9:{res:{sf: .5240564}}}{space 1}{space 1}{ralign 9:{res:{sf: .6422359}}}{space 1}{space 1}{ralign 9:{res:{sf:        2}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1488}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3550673}}}{space 1}{space 1}{ralign 9:{res:{sf: .1811113}}}{space 1}{space 1}{ralign 9:{res:{sf: .4255956}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832073}}}{space 1}{space 1}{ralign 9:{res:{sf: .5199678}}}{space 1}{space 1}{ralign 9:{res:{sf: .8628509}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.865619}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1425}}}{space 1}{space 1}{ralign 9:{res:{sf:-.3144251}}}{space 1}{space 1}{ralign 9:{res:{sf: .2044044}}}{space 1}{space 1}{ralign 9:{res:{sf: .4270399}}}{space 1}{space 1}{ralign 9:{res:{sf: .4832572}}}{space 1}{space 1}{ralign 9:{res:{sf: .5206167}}}{space 1}{space 1}{ralign 9:{res:{sf: .6701552}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.947242}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1594}}}{space 1}{space 1}{ralign 9:{res:{sf:  .000781}}}{space 1}{space 1}{ralign 9:{res:{sf: .0011571}}}{space 1}{space 1}{ralign 9:{res:{sf: .0095803}}}{space 1}{space 1}{ralign 9:{res:{sf: .0180595}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0438226}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1575}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008905}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009679}}}{space 1}{space 1}{ralign 9:{res:{sf: .0088585}}}{space 1}{space 1}{ralign 9:{res:{sf: .0221731}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0462024}}}{space 1}{space 1}{ralign 9:{res:{sf: .0771097}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1489}}}{space 1}{space 1}{ralign 9:{res:{sf: .0008926}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010615}}}{space 1}{space 1}{ralign 9:{res:{sf: .0072885}}}{space 1}{space 1}{ralign 9:{res:{sf:   .01937}}}{space 1}{space 1}{ralign 9:{res:{sf: .0291921}}}{space 1}{space 1}{ralign 9:{res:{sf: .0416667}}}{space 1}{space 1}{ralign 9:{res:{sf: .0661502}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     1424}}}{space 1}{space 1}{ralign 9:{res:{sf: .0009548}}}{space 1}{space 1}{ralign 9:{res:{sf: .0010894}}}{space 1}{space 1}{ralign 9:{res:{sf: .0130076}}}{space 1}{space 1}{ralign 9:{res:{sf: .0222012}}}{space 1}{space 1}{ralign 9:{res:{sf: .0333747}}}{space 1}{space 1}{ralign 9:{res:{sf: .0458334}}}{space 1}{space 1}{ralign 9:{res:{sf:  .092026}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:p99}{space 1}{space 1}{ralign 9:max}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:PRCCPIMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.552758}}}{space 1}{space 1}{ralign 9:{res:{sf:  2.68019}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.555054}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.303137}}}{space 1}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEMean1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 2.259464}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.452254}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .6345832}}}{space 1}{space 1}{ralign 9:{res:{sf: .8514586}}}{space 1}
{space 0}{space 0}{ralign 12:PRCCPIVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.239815}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.571215}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar0}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .4814685}}}{space 1}{space 1}{ralign 9:{res:{sf: .7210329}}}{space 1}
{space 0}{space 0}{ralign 12:PRCPCEVar1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .9142628}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.093869}}}{space 1}

{com}. putexcel set "${c -(}sum_table_folder{c )-}/InfExpSPFDstSum.xlsx", modify 
{res}{txt}
{com}. putexcel B2 = matrix(T), sheet("data_winsored") 
{res}{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/tables/InfExpSPFDstSum.xlsx saved

{com}. 
. 
. *********************************
. **   Time Series Graph of SPF  **
. *********************************
.                           
. 
. ******************************
. **   More Series Charts   ****
. ******************************
. 
. foreach mom in Mean Var{c -(}
{txt}  2{com}.    foreach var in PRCCPI PRCPCE{c -(}
{txt}  3{com}.     forvalues i=0/1{c -(}
{txt}  4{com}.      egen `var'`mom'`i'p75 =pctile(`var'`mom'`i'),p(75) by(year quarter)
{txt}  5{com}.          egen `var'`mom'`i'p25 =pctile(`var'`mom'`i'),p(25) by(year quarter)
{txt}  6{com}.          egen `var'`mom'`i'p50=pctile(`var'`mom'`i'),p(50) by(year quarter)
{txt}  7{com}.          local lb: variable label `var'`mom'`i'
{txt}  8{com}.          label var `var'`mom'`i'p75 "`lb': 75 pctile"
{txt}  9{com}.          label var `var'`mom'`i'p25 "`lb': 25 pctile"
{txt} 10{com}.          label var `var'`mom'`i'p50 "`lb': 50 pctile"
{txt} 11{com}.  {c )-}
{txt} 12{com}.  {c )-}
{txt} 13{com}. {c )-}
{txt}(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)
(1 missing value generated)

{com}. 
. local MomentsMom PRCCPIMean0p25 PRCCPIMean1p25 PRCPCEMean0p25 PRCPCEMean1p25 /// 
>               PRCCPIVar0p25 PRCCPIVar1p25 PRCPCEVar0p25 PRCPCEVar1p25 ///
>                           PRCCPIMean0p50 PRCCPIMean1p50 PRCPCEMean0p50 PRCPCEMean1p50 /// 
>               PRCCPIVar0p50 PRCCPIVar1p50 PRCPCEVar0p50 PRCPCEVar1p50 ///
>                           PRCCPIMean0p75 PRCCPIMean1p75 PRCPCEMean0p75 PRCPCEMean1p75 /// 
>               PRCCPIVar0p75 PRCCPIVar1p75 PRCPCEVar0p75 PRCPCEVar1p75 ///
> 
{txt}
{com}. 
. ** quarterly population data 
. preserve 
{txt}
{com}. collapse (mean) `Moments' `MomentsMom', by(date year quarter) 
{txt}
{com}. 
. foreach var in `Moments'{c -(}
{txt}  2{com}. rename `var' `var'mean
{txt}  3{com}. label var `var'mean "Population moments: mean of `var'"
{txt}  4{com}. {c )-}
{res}{txt}
{com}. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1",replace 
{txt}(note: file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta not found)
file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ1.dta saved

{com}. restore 
{txt}
{com}. 
. collapse (sd) `Moments', by(date year quarter) 
{txt}
{com}. foreach var in `Moments'{c -(}
{txt}  2{com}. replace `var' = `var'^2
{txt}  3{com}. rename `var' `var'disg
{txt}  4{com}. label var `var'disg "Population moments: variance of `var'"
{txt}  5{com}. {c )-}
{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}(49 real changes made)
{res}{txt}
{com}. merge using "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1"
{txt}{p}
(note: you are using old
{bf:merge} syntax; see
{bf:{help merge:[D] merge}} for new syntax)
{p_end}

{com}. drop _merge
{txt}
{com}. 
. drop date 
{txt}
{com}.  
. save "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ",replace 
{txt}file /Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData/SPF/InfExpSPFDstPopQ.dta saved

{com}. 
. rm "${c -(}mainfolder{c )-}/SurveyData/SPF/InfExpSPFDstPopQ1.dta"
{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "/Users/Myworld/Dropbox/ExpProject/workingfolder/DoFile/Step03_PopAnalysis.do"
{txt}
{com}. clear
{txt}
{com}. global mainfolder "/Users/Myworld/Dropbox/ExpProject/workingfolder"
{txt}
{com}. global folder "${c -(}mainfolder{c )-}/SurveyData/"
{txt}
{com}. global sum_graph_folder "${c -(}mainfolder{c )-}/graphs/pop"
{txt}
{com}. global sum_table_folder "${c -(}mainfolder{c )-}/tables"
{txt}
{com}. 
. cd ${c -(}folder{c )-}
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData
{txt}
{com}. pwd
{res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SurveyData
{txt}
{com}. set more off 
{txt}
{com}. capture log close
{smcl}
{com}{sf}{ul off}