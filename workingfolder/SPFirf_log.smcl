{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/Myworld/Dropbox/ExpProject/workingfolder/SPFirf_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}28 Jun 2019, 20:11:13
{txt}
{com}. 
. 
. 
. *****************************
. ***      IR Analysis     ****
. *****************************
. 
. use "${c -(}mainfolder{c )-}/OtherData/InfShocksQClean.dta",clear  
{txt}
{com}. 
. 
. merge 1:1 year quarter using "${c -(}folder{c )-}/InfExpQ.dta",keep(match using master)
{res}{txt}{p 0 7 2}
(note: variable
quarter was 
long, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}             146
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}             146{txt}  (_merge==2)

{col 5}matched{col 30}{res}             140{txt}  (_merge==3)
{col 5}{hline 41}

{com}. rename _merge InfExp_merge
{res}{txt}
{com}. 
. drop if month==. 
{txt}(146 observations deleted)

{com}. drop if quarter ==.
{txt}(0 observations deleted)

{com}. 
. 
. ** Period filter   
. ** i.e. Coibion et al2012. 1976-2007. But Density data is only avaiable after 2007.
. 
. keep if year>=1984
{txt}(0 observations deleted)

{com}. *keep if year > 2007
. *keep if year>=1976 & year <= 2007
. tsset date
{res}{txt}{col 9}time variable:  {res}{col 25}date, 1984q1 to 2018q4
{txt}{col 17}delta:  {res}1 quarter
{txt}
{com}.  
. 
. /*
> ** Plot all shocks for checking 
> 
> twoway (tsline pty_shock,lp(solid) lwidth(thick)) (tsline op_shock,lp(dash) lwidth(thick)) ///
>         (tsline mp1ut_shock,lp(shortdash) lwidth(thick)) (tsline ED8ut_shock,lp(dash_dot) lwidth(thick)), ///
>                 title("Shocks to Inflation",size(large)) ///
>                 xtitle("Time") ytitle("") ///
>                 legend(cols(1)) 
>                 
> graph export "${c -(}sum_graph_folder{c )-}/inf_shocksQ", as(png) replace
> 
> ** First-run of inflation 
> 
> eststo clear
> foreach sk in pty pty_max op mp1ut ED4ut ED8ut{c -(}
>   foreach Inf in CPIAU CPICore PCEPI{c -(} 
>    eststo `Inf'_`sk': reg Inf1y_`Inf' l(0/1).`sk'_shock, robust
>    eststo `Inf'_uid: reg Inf1y_`Inf' l(0/1).`Inf'_uid_shock,robust 
>  {c )-}
> {c )-}
> esttab using "${c -(}sum_table_folder{c )-}/IRFQ.csv", mtitles se r2 replace
> 
> ** IRF of inflation (one shock each time) 
> 
> eststo clear
> foreach sk in pty pty_max op mp1ut ED4ut ED8ut{c -(}
>   foreach Inf in CPIAU CPICore PCEPI{c -(} 
>    var Inf1y_`Inf', lags(1/4) exo(l(0/1).`sk'_shock)
>    set seed 123456
>    irf create irf1, set(irf,replace) step(10) bsp
>    irf graph dm, impulse(`sk'_shock)
>    graph export "${c -(}sum_graph_folder{c )-}/irf/`Inf'_`sk'", as(png) replace
>  {c )-}
> {c )-}
> */
. 
. 
. 
. 
. /*
> 
> 
> ***********************************************
> ** IRF of inflation (MP shocks at one time) **
> ***********************************************
> 
> label var CPIAU "CPI Inflation"
> label var PCEPI "PCE Inflation"
> 
> eststo clear
> 
> foreach Inf in CPIAU PCEPI{c -(} 
>    var Inf1y_`Inf', lags(1/4) ///
>                      exo(l(0/1).pty_shock l(0/1).op_shock ///
>                                          l(0/1).mp1ut_shock l(0/1).ED8ut_shock)   
>    set seed 123456
>    irf create `Inf', set(irf) step(10) bsp replace 
>   
> {c )-}
> irf graph dm, impulse(mp1ut_shock ED8ut_shock) ///
>                  byopts(title("Inflation") yrescale xrescale note("")) ///
>                  legend(col(2) order(1 "95% CI" 2 "IRF") symx(*.5) size(small)) ///
>                                  xtitle("Quarters") 
> graph export "${c -(}sum_graph_folder{c )-}/irf/Inf_ashocks", as(png) replace
> 
> 
> ***********************************************
> ** IRF of inflation (all shocks exl MP at one time) **
> ***********************************************
> 
> eststo clear
> 
> foreach Inf in CPIAU PCEPI{c -(} 
>    var Inf1y_`Inf', lags(1/4) ///
>                      exo(l(0/1).pty_shock l(0/1).op_shock)   
>    set seed 123456
>    irf create `Inf', set(irf) step(10) bsp replace 
>  {c )-}
>    irf graph dm, impulse(pty_shock op_shock) ///
>                  byopts(title("Inflation") yrescale xrescale note("")) ///
>                  legend(col(2) order(1 "95% CI" 2 "IRF") symx(*.5) size(small)) ///
>                                  xtitle("Quarters") 
>    graph export "${c -(}sum_graph_folder{c )-}/irf/Inf_ashocks_nmp", as(png) replace
> 
> 
> ***********************************************************
> ** IRF of SPF moments (all shocks exl MP at one time)    **
> ***********************************************************
> 
> 
> foreach mom in FE{c -(}
>    foreach var in SPFCPI SPFPCE{c -(}
>            capture var `var'_`mom', lags(1/4) ///
>                      exo(l(0/1).pty_shock l(0/1).op_shock) 
>    set seed 123456
>    capture irf create `var', set(irf) step(10) bsp replace  
> {c )-}
>    capture irf graph dm, impulse(pty_shock op_shock) ///
>                          byopts(title("`mom'") yrescale /// 
>                                                  xrescale note("")) legend(col(2) /// 
>                                                  order(1 "95% CI" 2 "IRF") symx(*.5) size(small))  ///
>                                                  xtitle("Quarters") 
>    capture graph export "${c -(}sum_graph_folder{c )-}/irf/moments/SPF`mom'_ashocks_nmp", as(png) replace
> {c )-}
> 
> 
> ****************************************************************
> ** IRF of SPF moments (all shocks(abs) exl MP at one time)    **
> ****************************************************************
> 
> 
> foreach mom in Disg Var{c -(}
>    foreach var in SPFCPI SPFPCE{c -(}
>        * shocks 
>        capture var `var'_`mom', lags(1/4) ///
>                      exo(l(0/1).pty_shock ///
>                                          l(0/1).pty_abshock l(0/1).op_abshock)
>    set seed 123456
>    capture irf create `var', set(irf) step(10) bsp replace 
> {c )-}
>  
>    capture irf graph dm, impulse(pty_abshock op_abshock) ///
>                          byopts(title("`mom'") yrescale /// 
>                                                  xrescale note("")) legend(col(2) /// 
>                                                  order(1 "95% CI" 2 "IRF") symx(*.5) size(small))  ///
>                                                  xtitle("Quarters") 
>    capture graph export "${c -(}sum_graph_folder{c )-}/irf/moments/SPF`mom'_ab_ashocks_nmp", as(png) replace
> {c )-}
> 
> 
> 
> ****************************************************
> ** IRF of SPF moments (MP shocks at one time)    **
> ****************************************************
> 
> 
> foreach mom in FE{c -(}
>    foreach var in SPFCPI SPFPCE{c -(}
>        * shocks 
>        capture var `var'_`mom', lags(1/4) ///
>                      exo(l(0/1).pty_shock l(0/1).op_shock ///
>                                          l(0/1).mp1ut_shock l(0/1).ED8ut_shock)
>    set seed 123456
>    capture irf create `var', set(irf) step(10) bsp replace 
> {c )-}
>  
>    capture irf graph dm, impulse(mp1ut_shock ED8ut_shock) ///
>                          byopts(col(2) title("`mom'") yrescale /// 
>                                                  xrescale note("")) legend(col(2) /// 
>                                                  order(1 "95% CI" 2 "IRF") symx(*.5) size(small))  ///
>                                                  xtitle("Quarters") 
>    capture graph export "${c -(}sum_graph_folder{c )-}/irf/moments/SPF`mom'_ashocks", as(png) replace
> {c )-}
> */
. 
. 
. *********************************************************
. ** IRF of SPF moments (MP shocks(abs) at one time)    **
. *********************************************************
. 
. 
. foreach mom in Disg Var{c -(}
{txt}  2{com}.    foreach var in SPFCPI SPFPCE{c -(}
{txt}  3{com}.        * shocks 
.        capture var `var'_`mom', lags(1/4) ///
>                      exo(l(0/1).pty_shock l(0/1).op_shock l(0/1).mp1ut_shock l(0/1).ED8ut_shock ///
>                                          l(0/1).pty_abshock l(0/1).op_abshock l(0/1).mp1ut_abshock l(0/1).ED8ut_abshock)
{txt}  4{com}.    set seed 123456
{txt}  5{com}.    capture irf create `var', set(irf) step(10) bsp replace 
{txt}  6{com}.    {c )-}
{txt}  7{com}.    capture irf graph dm, impulse(mp1ut_abshock ED8ut_abshock) ///
>                          byopts(col(2) title("`mom'") yrescale /// 
>                                                  xrescale note("") ) legend(col(2) /// 
>                                                  order(1 "95% CI" 2 "IRF") symx(*.5) size(small))  ///
>                                                  xtitle("Quarters")
{txt}  8{com}.    capture graph export "${c -(}sum_graph_folder{c )-}/irf/moments/SPF`mom'_ab_ashocks", as(png) replace
{txt}  9{com}. {c )-}
{txt}
{com}. ddd
{err}unrecognized command:  ddd
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. clear

. 